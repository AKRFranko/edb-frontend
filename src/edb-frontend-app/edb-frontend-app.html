<link rel="import" href="../../bower_components/polymer/polymer.html">
<script src="../../creds.js"></script>
<script src="../../edb.js"></script>
<script src="../../edb-resources.js"></script>
<script src="../../edb-polymer.js"></script>
<dom-module id="edb-frontend-app">
  <template>
    <style>
      :host {
        display: block;
        margin:0;
        padding:0;
        box-sizing:border-box;
        max-width:100vw;
        height:100vh;
        overflow-x:hidden;
        overflow-y:auto;
        --edb-font-body: {
          font-family:"pragmatica-web-condensed", 'Helvetica Neue', Helvetica, Arial, sans-serif;
          font-weight:normal;
          font-size:15px;
          line-height:1.25;
          text-transform:lowercase;
        }
        
        --edb-font-title: {
          font-family:'adobe-caslon-pro', Georgia, 'Times New Roman', Times, serif;
          font-weight:normal;
          font-size:22px;
          line-height:2;
          text-transform:uppercase;
        }
        
        --edb-font-subtitle: {
          font-family:'adobe-caslon-pro', Georgia, 'Times New Roman', Times, serif;
          font-weight:normal;
          font-size:16px;
          line-height:2;
          text-transform:uppercase;
        }
        
        --edb-font-price: {
          font-family: "pragmatica-web-condensed", 'Helvetica Neue', Helvetica, Arial, sans-serif;
          font-weight: bold;
          font-size: 15px;
          line-height: 1.25;
          text-transform: uppercase;
          margin-bottom: 1.5em;
        }
        --edb-font-headline: {
          font-family: "pragmatica-web-condensed", 'Helvetica Neue', Helvetica, Arial, sans-serif;
          font-size: 45px;
          line-height: 2;
          text-transform: uppercase;
          text-shadow: 0 0 2px rgba(0, 0, 0, 0.2);
        }
        --edb-font-subhead: {
          font-family:'adobe-caslon-pro', Georgia, 'Times New Roman', Times, serif;
          font-size: 22px;
          text-transform: lowercase;
          line-height: 1.5;
          text-transform: uppercase;
          text-shadow: 0 0 2px rgba(0, 0, 0, 0.2);
        }
        @apply(--edb-font-body);
      }
      
      .edb-title{
        @apply(--edb-font-title);
      }
      .edb-subtitle{
        @apply(--edb-font-subtitle);
      }
      .edb-headline{
        @apply(--edb-font-headline);
      }
      .edb-subhead{
        @apply(--edb-font-subhead);
      }
      
      edb-card,edb-tile{
        background:#fff;
        width:100%;
        height:100%;
        margin:0;
      }
      edb-map{
        min-height:100%;
        min-width:100%;
        max-height:100%;
        max-width:100%;
        width:100%;
        height:100%;
      }
      app-toolbar{
        background:#fff
        padding:0;
      }
      section,article,edb-page{
        display:block;
        @apply(--layout-vertical);
        width:100%;
        height:100%;
        margin:0;
        /*min-height:100%;*/
        /*min-width:100%;*/
        
        
      }
      div.grid{
        width:100%;
        
        @apply(--layout-horizontal);
        @apply(--layout-wrap);
        box-sizing:border-box;
        padding:40px;
      }
      div.grid article{
        
      }
      article.address,
      article.showroom,
      article.map,
      article.form{
        display:block;
        width:50%;
        
        box-sizing:border-box;
      }
      edb-map{
        width:100vw;
        height:100vh;
        min-width:100%;
        min-height:100%;
        max-width:100%;
        max-height:100%;
      }
    </style>
    <edb-layout-query layout="{{layout}}" is-mini-layout="{{isMiniLayout}}"></edb-layout-query>
    <app-scrollpos-control selected="{{page}}"></app-scrollpos-control>

    
    <app-header-layout fullbleed>
      <app-header condenses reveals>
        
          <edb-app-toolbar sticky lang="fr" user="{{user}}" cart="{{cart}}" layout="{{layout}}"></edb-app-toolbar>  
        
        
      </app-header>
      <div>
        <iron-pages attr-for-selected="id" selected="{{page}}">
        <section id="home">
          <edb-slider layout="{{layout}}" loading="{{slide.loading}}" slides="{{slide.items}}"></edb-slider>
          <edb-grid layout="{{layout}}" loading="{{feature.loading}}">
          <template is="dom-repeat" items="{{feature.items}}" as="feature">
            <edb-card class$="{{feature.cardType}}" image="{{feature.image.src}}" title="{{feature.title.en}}" subtitle="{{feature.subtitle.en}}">
              <p>{{limitText(feature.content.en,120)}}</p>
            </edb-card>
          </template>  
          </edb-grid>
        </section>
        
        <section id="contact">
          <edb-page title="Contact" image="https://placehold.it/1500/920/ff0000/ffffff">
            <div class="grid">
            <article class="address">
              <h3 class="edb-subtitle">ADDRESS</h3>
              <span class="street-address">534 mccaffrey</span>
              <span class="locality">montreal, qc</span>
              <span class="postcode">h4t 1n1</span>
              <br>
              <span class="phone">514-738-6484</span>
              <span class="phone">1-844-738-6484</span>
              <span class="email"><a href="mailto:info@elementdebase.com">info@elementdebase.com</a></span>
            </article>  
            
            <article class="showroom">
              <h3 class="edb-subtitle">SHOWROOM OPEN TO THE PUBLIC</h3>
              <table>
                <tr><th>mon â€“ tue</th><td>by appointment*</td></tr>
                <tr>  <th>wed</th><td>12h00 to 18h00</td></tr>
                <tr>  <th>thu - fri</th><td>12h00 to 20h00</td></tr>
                <tr> <th>sat - sun</th><td>13h00 to 17h00</td></tr>
              </table>
              <p class="edb-footnote">* to arrange an appointment, please call us within our opening hours or write to us at least 24 hours in advance at <a href="mailto:info@elementdebase.com">info@elementdebase.com</a></p>
              <p>Our showroom is open to the public. everyone is welcome to pass by during our opening hours.</p>
            </article>
            
            <article class="map">
              <edb-map></edb-map>
            </article>
            <article class="form">
              <form>
                <p>MANANANANANANNA</p>
              </form>
            </article>
            </div>
            
            
            
          </edb-page>
        </section>
          <!--<edb-slider layout="{{layout}}"></edb-slider>-->
        </iron-pages>
      </div>
    </app-header-layout>
    
      
      
    
  </template>

  <script>
  function isDescendant(parent, child) {
       var node = child.parentNode;
       while (node != null) {
           if (node == parent) {
               return true;
           }
           node = node.parentNode;
       }
       return false;
  }
    Polymer({

      is: 'edb-frontend-app',

      properties: {
        prop1: {
          type: String,
          value: 'edb-frontend-app',
        },
        page: {
          type: String,
          value: 'contact',
          notify: true
        },
        slide:{
          type: Object,
          notify: true,
          value: function(){
            return {};
          }
        },
        feature:{
          type: Object,
          notify: true,
          value: function(){
            return {};
          }
        }
      },
      // sortBySortOrder: function( a,b ){
      //   if(!a.sortOrder && a.sortOrder !== 0){
      //     return 0;
      //   }
      //   if(!b.sortOrder && b.sortOrder !== 0){
      //     return 0;
      //   }
      //   if(a.sortOrder > b.sortOrder){
      //     return -1;
      //   }
      //   if(a.sortOrder < b.sortOrder){
      //     return 1;
      //   }
      //   return 0;
      // },
      limitText: function( t,n ){
        return t.slice(0,n)+'...';
      },
      ready: function(){
        // var slides = new EDB.PolymerResource( 'slides' );
        
        var slide = new EDB.PolymerResource('slide', this);
        slide.refreshItems();
        var feature = new EDB.PolymerResource('feature', this);
        feature.refreshItems();
        // this.set('slides', slides.items );
        // console.log()
      }

    });
  </script>
</dom-module>
