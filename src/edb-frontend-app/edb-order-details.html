<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="edb-order-details">
  <template>
    <style>
      :host{
        display:block;
        width:100%;
        height:100%;
        @apply(--edb-font-body);
      }
      *{
        box-sizing:border-box;
      }
      
      .title{
        @apply(--edb-font-subtitle);
      }
      #addresses{
        padding:0 40px 20px;
        @apply(--layout-horizontal);
        
      }
      #billing,#shipping{
        width:calc(50% - 20px);
      }
      #billing{
        margin-right:40px;
      }
      #lineItems{
        padding:0 40px 20px;
        @apply(--layout-vertical);
      }
      .line-item{
        @apply(--layout-horizontal);
        @apply(--layout-center);
        @apply(--layout-justified);
        margin-bottom:10px;
        padding-bottom:10px;
        border-bottom:1px solid #000;
      }
      .line{
        @apply(--layout-horizontal);
      }
      .math{
        @apply(--layout-vertical);
        width:80%;
      }
      .math .line{
        width:100%;
        
      }
      .line.name{
        
        
      }
      .line.underline{
        text-decoration:underline;
      }
      .line.last{
        font-weight:bold;
        text-align:right;
      }
      .total .line.name,
      .totals .line.name{
        font-weight:bold;
      }
      .total .line{
        font-weight:bold;
        font-size:1.2em;
      }
      .total{
        border-bottom:0;
      }
    </style>
    
    <div id="addresses">
      <div id="billing">
        <div class="title">Billing Address</div>
        <div class="address">
          <div hidden$="[[!order.billing.first_name]]">[[order.billing.first_name]] [[order.billing.last_name]]</div>
          <div hidden$="[[!order.billing.email]]">[[order.billing.email]]</div>
          <div hidden$="[[!order.billing.phone]]">[[order.billing.phone]]</div>
          <div hidden$="[[!order.billing.address_1]]">[[order.billing.address_1]]</div>
          <div hidden$="[[!order.billing.address_2]]">[[order.billing.address_2]]</div>
          <div hidden$="[[!order.billing.city]]">[[order.billing.city]]</div>
          <div hidden$="[[!order.billing.state]]">[[order.billing.state]]</div>
          <div hidden$="[[!order.billing.postcode]]">[[order.billing.country]],[[order.billing.postcode]]</div>
        </div>
       
        
      </div>
      <div id="shipping">
        <div class="title">Shipping Address</div>
        <div class="address">
          <div hidden$="[[!order.shipping.first_name]]">[[order.shipping.first_name]] [[order.shipping.last_name]]</div>
          <div hidden$="[[!order.shipping.email]]">[[order.shipping.email]]</div>
          <div hidden$="[[!order.shipping.phone]]">[[order.shipping.phone]]</div>
          <div hidden$="[[!order.shipping.address_1]]">[[order.shipping.address_1]]</div>
          <div hidden$="[[!order.shipping.address_2]]">[[order.shipping.address_2]]</div>
          <div hidden$="[[!order.shipping.city]]">[[order.shipping.city]]</div>
          <div hidden$="[[!order.shipping.state]]">[[order.shipping.state]]</div>
          <div hidden$="[[!order.shipping.postcode]]">[[order.shipping.country]],[[order.shipping.postcode]]</div>
        </div>
        
      </div>
    </div>
    <div id="lineItems">
      <div class="title">Order Details</div>
      <template is="dom-repeat" items="[[order.line_items]]" as="line">
        <div class="line-item">
          <div class="line name">[[computeLineItemName(line.name)]]</div>
          <div class="math">
            <div class="line underline">[[line.quantity]]&times;<span>[[line.price]]</span></div>
            <div class="line last">$[[line.subtotal]]</div>
          </div>
        </div>
      </template>
      <template is="dom-repeat" items="[[order.shipping_lines]]" as="line">
        <div class="line-item">
          <div class="line name">Shipping: [[line.method_title]]</div>
          <div class="math">
            <div class="line last">$[[line.total]]</div>
          </div>
        </div>
      </template>
      
      <div class="line-item totals">
        <div class="line name">Shipping Total</div>
        <div class="math">
          <div class="line last">$[[order.shipping_total]]</div>
        </div>
      </div>
      
      
      <template is="dom-repeat" items="[[order.tax_lines]]" as="line">
        <div class="line-item">
          <div class="line name">[[line.label]]</div>
          <div class="math">
            <div class="line last">$[[line.tax_total]]</div>
          </div>
        </div>
      </template>

      <div class="line-item totals">
        <div class="line name">Tax Total</div>
        <div class="math">
          <div class="line last">$[[order.total_tax]]</div>
        </div>
      </div>
      <div class="line-item total">
        <div class="line name">Total</div>
        <div class="math">
          <div class="line last">$[[order.total]]</div>
        </div>
      </div>
    </div>
    
  </template>
  <script>
     
      Polymer({
  
        is: 'edb-order-details',
  
        properties: {
          
          layout: {
            type: String,
            value: null,
            notify: true
          },
          order: {
            type: Object,
            value: function(){
              return {};
            },
            notify: true
          },
           
         
        
        },
        observers: [],
        computeLineItemName: function( n ){
          if( n ){
            return n.replace(/bucket/i, '' );
          }
          return n;
        }
      });
  </script>
</dom-module>