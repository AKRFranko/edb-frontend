(function(){var c=function(f,g,h,k){var l={};f=f||[],l.gramSizeLower=h||2,l.gramSizeUpper=k||3,l.useLevenshtein='boolean'!==typeof g||g,l.exactSet={},l.matchDict={},l.items={};var m=function(t,u){for(var w,x,v=[],y=0;y<=u.length;y++)for(var z=0;z<=t.length;z++)x=y&&z?t.charAt(z-1)===u.charAt(y-1)?w:Math.min(v[z],v[z-1],w)+1:y+z,w=v[z],v[z]=x;return v.pop()},n=function(t,u){if(null===t&&null===u)throw'Trying to compare two null values';if(null===t||null===u)return 0;t=t+'',u=u+'';var v=m(t,u);return t.length>u.length?1-v/t.length:1-v/u.length},o=/[^a-zA-Z0-9\u00C0-\u00FF, ]+/g,p=function(t,u){u=u||2;var v='-'+t.toLowerCase().replace(o,'')+'-',w=u-v.length,x=[];if(0<w)for(var y=0;y<w;++y)t+='-';for(var y=0;y<v.length-u+1;++y)x.push(v.slice(y,y+u));return x},q=function(t,u){u=u||2;var v={},w=p(t,u),x=0;for(x;x<w.length;++x)w[x]in v?v[w[x]]+=1:v[w[x]]=1;return v};l.get=function(s,t,u){u===void 0&&(u=.33);var v=this._get(s,u);return v||'undefined'===typeof t?v:t},l._get=function(s,t){var u=this._normalizeStr(s),v=this.exactSet[u];if(v)return[[1,v]];for(var w=[],x=this.gramSizeUpper;x>=this.gramSizeLower;--x)if(w=this.__get(s,x,t),w&&0<w.length)return w;return null},l.__get=function(s,t,u){var B,C,D,E,F,w=this._normalizeStr(s),x={},y=q(w,t),z=this.items[t],A=0;for(B in y)if(C=y[B],A+=Math.pow(C,2),B in this.matchDict)for(D=0;D<this.matchDict[B].length;++D)E=this.matchDict[B][D][0],F=this.matchDict[B][D][1],E in x?x[E]+=C*F:x[E]=C*F;if(function(N){for(var O in N)if(N.hasOwnProperty(O))return!1;return!0}(x))return null;var I,G=Math.sqrt(A),H=[];for(var J in x)I=x[J],H.push([I/(G*z[J][0]),z[J][1]]);var K=function(O,P){return O[0]<P[0]?1:O[0]>P[0]?-1:0};if(H.sort(K),this.useLevenshtein){for(var L=[],M=Math.min(50,H.length),D=0;D<M;++D)L.push([n(H[D][1],w),H[D][1]]);H=L,H.sort(K)}var L=[];return H.forEach(function(N){N[0]>=u&&L.push([N[0],this.exactSet[N[1]]])}.bind(this)),L},l.add=function(s){var t=this._normalizeStr(s);if(t in this.exactSet)return!1;var u=this.gramSizeLower;for(u;u<this.gramSizeUpper+1;++u)this._add(s,u)},l._add=function(s,t){var u=this._normalizeStr(s),v=this.items[t]||[],w=v.length;v.push(0);var z,A,x=q(u,t),y=0;for(z in x)A=x[z],y+=Math.pow(A,2),z in this.matchDict?this.matchDict[z].push([w,A]):this.matchDict[z]=[[w,A]];var B=Math.sqrt(y);v[w]=[B,u],this.items[t]=v,this.exactSet[u]=s},l._normalizeStr=function(s){if('[object String]'!==Object.prototype.toString.call(s))throw'Must use a string as argument to FuzzySet functions';return s.toLowerCase()},l.length=function(){var t,s=0;for(t in this.exactSet)this.exactSet.hasOwnProperty(t)&&(s+=1);return s},l.isEmpty=function(){for(var s in this.exactSet)if(this.exactSet.hasOwnProperty(s))return!1;return!0},l.values=function(){var t,s=[];for(t in this.exactSet)this.exactSet.hasOwnProperty(t)&&s.push(this.exactSet[t]);return s};var r=l.gramSizeLower;for(r;r<l.gramSizeUpper+1;++r)l.items[r]=[];for(r=0;r<f.length;++r)l.add(f[r]);return l},d=this;'undefined'!==typeof module&&module.exports?(module.exports=c,d.FuzzySet=c):d.FuzzySet=c})();