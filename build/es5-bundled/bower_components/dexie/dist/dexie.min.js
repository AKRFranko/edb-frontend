!function(ee,ne){"object"==("undefined"===typeof exports?"undefined":babelHelpers.typeof(exports))&&"undefined"!=typeof module?module.exports=ne():"function"==typeof define&&define.amd?define(ne):ee.Dexie=ne()}(this,function(){"use strict";function ee(Ja,Xa){return"object"==("undefined"===typeof Xa?"undefined":babelHelpers.typeof(Xa))?(Ir(Xa).forEach(function(Za){Ja[Za]=Xa[Za]}),Ja):Ja}function ne(Ja,Xa){return Tr.call(Ja,Xa)}function te(Ja,Xa){"function"==typeof Xa&&(Xa=Xa(Kr(Ja))),Ir(Xa).forEach(function(Za){re(Ja,Za,Xa[Za])})}function re(Ja,Xa,Za,$a){Br(Ja,Xa,ee(Za&&ne(Za,"get")&&"function"==typeof Za.get?{get:Za.get,set:Za.set,configurable:!0}:{value:Za,configurable:!0,writable:!0},$a))}function ae(Ja){return{from:function(Za){return Ja.prototype=Object.create(Za.prototype),re(Ja.prototype,"constructor",Ja),{extend:te.bind(null,Ja.prototype)}}}}function oe(Ja,Xa){var Za,$a=Fr(Ja,Xa);return $a||(Za=Kr(Ja))&&oe(Za,Xa)}function ie(Ja,Xa,Za){return Nr.call(Ja,Xa,Za)}function se(Ja,Xa){return Xa(Ja)}function de(Ja){var Xa=setTimeout(Ja,1e3);clearTimeout(Xa)}function ce(Ja){if(!Ja)throw new Error("Assertion Failed")}function le(Ja){Or.setImmediate?setImmediate(Ja):setTimeout(Ja,0)}function ue(Ja,Xa){return Ja.reduce(function(Za,$a,eo){var no=Xa($a,eo);return no&&(Za[no[0]]=no[1]),Za},{})}function he(Ja,Xa){return function(){try{Ja.apply(this,arguments)}catch(Za){Xa(Za)}}}function pe(Ja,Xa,Za){try{Ja.apply(null,Za)}catch($a){Xa&&Xa($a)}}function fe(Ja,Xa){if(ne(Ja,Xa))return Ja[Xa];if(!Xa)return Ja;if("string"!=typeof Xa){for(var no,Za=[],$a=0,eo=Xa.length;$a<eo;++$a)no=fe(Ja,Xa[$a]),Za.push(no);return Za}var to=Xa.indexOf(".");if(-1!==to){var ro=Ja[Xa.substr(0,to)];return void 0===ro?void 0:fe(ro,Xa.substr(to+1))}}function me(Ja,Xa,Za){if(Ja&&void 0!==Xa&&!("isFrozen"in Object&&Object.isFrozen(Ja)))if("string"!=typeof Xa&&"length"in Xa){ce("string"!=typeof Za&&"length"in Za);for(var $a=0,eo=Xa.length;$a<eo;++$a)me(Ja,Xa[$a],Za[$a])}else{var no=Xa.indexOf(".");if(-1!==no){var to=Xa.substr(0,no),ro=Xa.substr(no+1);if(""===ro)void 0===Za?delete Ja[to]:Ja[to]=Za;else{var ao=Ja[to];ao||(ao=Ja[to]={}),me(ao,ro,Za)}}else void 0===Za?delete Ja[Xa]:Ja[Xa]=Za}}function ye(Ja){var Xa={};for(var Za in Ja)ne(Ja,Za)&&(Xa[Za]=Ja[Za]);return Xa}function be(Ja){return qr.apply([],Ja)}function _e(Ja){if(!Ja||"object"!=("undefined"===typeof Ja?"undefined":babelHelpers.typeof(Ja)))return Ja;var Xa;if(Cr(Ja)){Xa=[];for(var Za=0,$a=Ja.length;Za<$a;++Za)Xa.push(_e(Ja[Za]))}else if(0<=Mr.indexOf(Ja.constructor))Xa=Ja;else for(var eo in Xa=Ja.constructor?Object.create(Ja.constructor.prototype):{},Ja)ne(Ja,eo)&&(Xa[eo]=_e(Ja[eo]));return Xa}function ve(Ja,Xa,Za,$a){return Za=Za||{},$a=$a||"",Ir(Ja).forEach(function(eo){if(ne(Xa,eo)){var no=Ja[eo],to=Xa[eo];"object"==("undefined"===typeof no?"undefined":babelHelpers.typeof(no))&&"object"==("undefined"===typeof to?"undefined":babelHelpers.typeof(to))&&no&&to&&""+no.constructor==""+to.constructor?ve(no,to,Za,$a+eo+"."):no!==to&&(Za[$a+eo]=Xa[eo])}else Za[$a+eo]=void 0}),Ir(Xa).forEach(function(eo){ne(Ja,eo)||(Za[$a+eo]=Xa[eo])}),Za}function ke(Ja){var Xa,Za,$a,eo;if(1===arguments.length){if(Cr(Ja))return Ja.slice();if(this===Vr&&"string"==typeof Ja)return[Ja];if(eo=Ur(Ja)){for(Za=[];$a=eo.next(),!$a.done;)Za.push($a.value);return Za}if(null==Ja)return[Ja];if(Xa=Ja.length,"number"==typeof Xa){for(Za=Array(Xa);Xa--;)Za[Xa]=Ja[Xa];return Za}return[Ja]}for(Xa=arguments.length,Za=Array(Xa);Xa--;)Za[Xa]=arguments[Xa];return Za}function xe(Ja,Xa){Lr=Ja,zr=Xa}function we(){if(Wr)try{throw we.arguments,new Error}catch(Ja){return Ja}return new Error}function Pe(Ja,Xa){var Za=Ja.stack;return Za?(Xa=Xa||0,0===Za.indexOf(Ja.name)&&(Xa+=(Ja.name+Ja.message).split("\n").length),Za.split("\n").slice(Xa).filter(zr).map(function($a){return"\n"+$a}).join("")):""}function Ae(Ja,Xa){return function(){return console.warn(Ja+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+Pe(we(),1)),Xa.apply(this,arguments)}}function je(Ja,Xa){this._e=we(),this.name=Ja,this.message=Xa}function De(Ja,Xa){return Ja+". Errors: "+Xa.map(function(Za){return Za.toString()}).filter(function(Za,$a,eo){return eo.indexOf(Za)===$a}).join("\n")}function Ee(Ja,Xa,Za,$a){this._e=we(),this.failures=Xa,this.failedKeys=$a,this.successCount=Za}function Se(Ja,Xa){this._e=we(),this.name="BulkError",this.failures=Xa,this.message=De(Ja,Xa)}function Ce(){}function Oe(Ja){return Ja}function Ke(Ja,Xa){return null==Ja||Ja===Oe?Xa:function(Za){return Xa(Ja(Za))}}function Te(Ja,Xa){return function(){Ja.apply(this,arguments),Xa.apply(this,arguments)}}function Be(Ja,Xa){return Ja===Ce?Xa:function(){var Za=Ja.apply(this,arguments);void 0!==Za&&(arguments[0]=Za);var $a=this.onsuccess,eo=this.onerror;this.onsuccess=null,this.onerror=null;var no=Xa.apply(this,arguments);return $a&&(this.onsuccess=this.onsuccess?Te($a,this.onsuccess):$a),eo&&(this.onerror=this.onerror?Te(eo,this.onerror):eo),void 0===no?Za:no}}function Fe(Ja,Xa){return Ja===Ce?Xa:function(){Ja.apply(this,arguments);var Za=this.onsuccess,$a=this.onerror;this.onsuccess=this.onerror=null,Xa.apply(this,arguments),Za&&(this.onsuccess=this.onsuccess?Te(Za,this.onsuccess):Za),$a&&(this.onerror=this.onerror?Te($a,this.onerror):$a)}}function Ne(Ja,Xa){return Ja===Ce?Xa:function(Za){var $a=Ja.apply(this,arguments);ee(Za,$a);var eo=this.onsuccess,no=this.onerror;this.onsuccess=null,this.onerror=null;var to=Xa.apply(this,arguments);return eo&&(this.onsuccess=this.onsuccess?Te(eo,this.onsuccess):eo),no&&(this.onerror=this.onerror?Te(no,this.onerror):no),void 0===$a?void 0===to?void 0:to:ee($a,to)}}function qe(Ja,Xa){return Ja===Ce?Xa:function(){return!1!==Xa.apply(this,arguments)&&Ja.apply(this,arguments)}}function Me(Ja,Xa){return Ja===Ce?Xa:function(){var Za=Ja.apply(this,arguments);if(Za&&"function"==typeof Za.then){for(var $a=this,eo=arguments.length,no=Array(eo);eo--;)no[eo]=arguments[eo];return Za.then(function(){return Xa.apply($a,no)})}return Xa.apply(this,arguments)}}function Re(Ja){if("object"!=babelHelpers.typeof(this))throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Ce,this._lib=!1;var Xa=this._PSD=wa;if(Lr&&(this._stackHolder=we(),this._prev=null,this._numPrev=0),"function"!=typeof Ja){if(Ja!==na)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Le(this,this._value))}this._state=null,this._value=null,++Xa.ref,Ve(this,Ja)}function Ue(Ja,Xa,Za,$a,eo){this.onFulfilled="function"==typeof Ja?Ja:null,this.onRejected="function"==typeof Xa?Xa:null,this.resolve=Za,this.reject=$a,this.psd=eo}function Ve(Ja,Xa){try{Xa(function(Za){if(null===Ja._state){if(Za===Ja)throw new TypeError("A promise cannot be resolved with itself.");var $a=Ja._lib&&Je();Za&&"function"==typeof Za.then?Ve(Ja,function(eo,no){Za instanceof Re?Za._then(eo,no):Za.then(eo,no)}):(Ja._state=!0,Ja._value=Za,ze(Ja)),$a&&Xe()}},Le.bind(null,Ja))}catch(Za){Le(Ja,Za)}}function Le(Ja,Xa){if(_a.push(Xa),null===Ja._state){var Za=Ja._lib&&Je();Xa=ka(Xa),Ja._state=!1,Ja._value=Xa,Lr&&null!==Xa&&"object"==("undefined"===typeof Xa?"undefined":babelHelpers.typeof(Xa))&&!Xa._promise&&pe(function(){var $a=oe(Xa,"stack");Xa._promise=Ja,re(Xa,"stack",{get:function(){return pa?$a&&($a.get?$a.get.apply(Xa):$a.value):Ja.stack}})}),Xt(Ja),ze(Ja),Za&&Xe()}}function ze(Ja){var Xa=Ja._listeners;Ja._listeners=[];for(var Za=0,$a=Xa.length;Za<$a;++Za)We(Ja,Xa[Za]);var eo=Ja._PSD;--eo.ref||eo.finalize(),0===Aa&&(++Aa,ma(function(){0===--Aa&&Ze()},[]))}function We(Ja,Xa){if(null===Ja._state)return void Ja._listeners.push(Xa);var Za=Ja._state?Xa.onFulfilled:Xa.onRejected;return null===Za?(Ja._state?Xa.resolve:Xa.reject)(Ja._value):(++Xa.psd.ref,++Aa,void ma(Qe,[Za,Ja,Xa]))}function Qe(Ja,Xa,Za){try{va=Xa;var $a,eo=Xa._value;Xa._state?$a=Ja(eo):(_a.length&&(_a=[]),$a=Ja(eo),-1===_a.indexOf(eo)&&Zt(Xa)),Za.resolve($a)}catch(no){Za.reject(no)}finally{va=null,0===--Aa&&Ze(),--Za.psd.ref||Za.psd.finalize()}}function He(Ja,Xa,Za){if(Xa.length===Za)return Xa;var $a="";if(!1===Ja._state){var eo,no,to=Ja._value;null==to?(eo=to,no=""):(eo=to.name||"Error",no=to.message||to,$a=Pe(to,0)),Xa.push(eo+(no?": "+no:"")+$a)}return Lr&&($a=Pe(Ja._stackHolder,2),$a&&-1===Xa.indexOf($a)&&Xa.push($a),Ja._prev&&He(Ja._prev,Xa,Za)),Xa}function Ge(Ja,Xa){var Za=Xa?Xa._numPrev+1:0;Za<ta&&(Ja._prev=Xa,Ja._numPrev=Za)}function Ye(){Je()&&Xe()}function Je(){var Ja=ga;return ga=!1,ya=!1,Ja}function Xe(){var Ja,Xa,Za;do for(;0<Pa.length;)for(Ja=Pa,Pa=[],Za=Ja.length,Xa=0;Xa<Za;++Xa){var $a=Ja[Xa];$a[0].apply(null,$a[1])}while(0<Pa.length);ga=!0,ya=!0}function Ze(){var Ja=ba;ba=[],Ja.forEach(function($a){$a._PSD.onunhandled.call(null,$a._value,$a)});for(var Xa=ja.slice(0),Za=Xa.length;Za;)Xa[--Za]()}function $e(Ja){function Xa(){Ja(),ja.splice(ja.indexOf(Xa),1)}ja.push(Xa),++Aa,ma(function(){0===--Aa&&Ze()},[])}function Xt(Ja){ba.some(function(Xa){return Xa._value===Ja._value})||ba.push(Ja)}function Zt(Ja){for(var Xa=ba.length;Xa;)if(ba[--Xa]._value===Ja._value)return void ba.splice(Xa,1)}function er(Ja){return new Re(na,!1,Ja)}function nr(Ja,Xa){var Za=wa;return function(){var $a=Je(),eo=wa;try{return cr(Za,!0),Ja.apply(this,arguments)}catch(no){Xa&&Xa(no)}finally{cr(eo,!1),$a&&Xe()}}}function tr(Ja,Xa,Za,$a){var eo=wa,no=Object.create(eo);no.parent=eo,no.ref=0,no.global=!1,no.id=++Ka;var to=xa.env;no.env=ha?{Promise:Re,PromiseProp:{value:Re,configurable:!0,writable:!0},all:Re.all,race:Re.race,resolve:Re.resolve,reject:Re.reject,nthen:fr(to.nthen,no),gthen:fr(to.gthen,no)}:{},Xa&&ee(no,Xa),++eo.ref,no.finalize=function(){--this.parent.ref||this.parent.finalize()};var ro=ur(no,Ja,Za,$a);return 0===no.ref&&no.finalize(),ro}function rr(){return Ea.id||(Ea.id=++Sa),++Ea.awaits,Ea.echoes+=aa,Ea.id}function ar(Ja){!Ea.awaits||Ja&&Ja!==Ea.id||(0===--Ea.awaits&&(Ea.id=0),Ea.echoes=Ea.awaits*aa)}function ir(Ja){return Ea.echoes&&Ja&&Ja.constructor===la?(rr(),Ja.then(function(Xa){return ar(),Xa},function(Xa){return ar(),Fa(Xa)})):Ja}function sr(Ja){++Oa,Ea.echoes&&0!==--Ea.echoes||(Ea.echoes=Ea.id=0),Ia.push(wa),cr(Ja,!0)}function dr(){var Ja=Ia[Ia.length-1];Ia.pop(),cr(Ja,!1)}function cr(Ja,Xa){var Za=wa;if((Xa?!Ea.echoes||Ca++&&Ja===wa:!Ca||--Ca&&Ja===wa)||hr(Xa?sr.bind(null,Ja):dr),Ja!==wa&&(wa=Ja,Za===xa&&(xa.env=lr()),ha)){var $a=xa.env.Promise,eo=Ja.env;sa.then=eo.nthen,$a.prototype.then=eo.gthen,(Za.global||Ja.global)&&(Object.defineProperty(Or,"Promise",eo.PromiseProp),$a.all=eo.all,$a.race=eo.race,$a.resolve=eo.resolve,$a.reject=eo.reject)}}function lr(){var Ja=Or.Promise;return ha?{Promise:Ja,PromiseProp:Object.getOwnPropertyDescriptor(Or,"Promise"),all:Ja.all,race:Ja.race,resolve:Ja.resolve,reject:Ja.reject,nthen:sa.then,gthen:Ja.prototype.then}:{}}function ur(Ja,Xa,Za,$a,eo){var no=wa;try{return cr(Ja,!0),Xa(Za,$a,eo)}finally{cr(no,!1)}}function hr(Ja){ca.call(ia,Ja)}function pr(Ja,Xa,Za){return"function"==typeof Ja?function(){var $a=wa;Za&&rr(),cr(Xa,!0);try{return Ja.apply(this,arguments)}finally{cr($a,!1)}}:Ja}function fr(Ja,Xa){return function(Za,$a){return Ja.call(this,pr(Za,Xa,!1),pr($a,Xa,!1))}}function mr(Ja,Xa){var Za;try{Za=Xa.onuncatched(Ja)}catch(no){}if(!1!==Za)try{var $a,eo={promise:Xa,reason:Ja};if(Or.document&&document.createEvent?($a=document.createEvent("Event"),$a.initEvent(Ta,!0,!0),ee($a,eo)):Or.CustomEvent&&($a=new CustomEvent(Ta,{detail:eo}),ee($a,eo)),$a&&Or.dispatchEvent&&(dispatchEvent($a),!Or.PromiseRejectionEvent&&Or.onunhandledrejection))try{Or.onunhandledrejection($a)}catch(no){}$a.defaultPrevented||console.warn("Unhandled rejection: "+(Ja.stack||Ja))}catch(no){}}function gr(Ja){function Xa(ro,ao,oo){if("object"==("undefined"===typeof ro?"undefined":babelHelpers.typeof(ro)))return Za(ro);ao||(ao=qe),oo||(oo=Ce);var io={subscribers:[],fire:oo,subscribe:function(co){-1===io.subscribers.indexOf(co)&&(io.subscribers.push(co),io.fire=ao(io.fire,co))},unsubscribe:function(co){io.subscribers=io.subscribers.filter(function(lo){return lo!==co}),io.fire=io.subscribers.reduce(ao,oo)}};return $a[ro]=eo[ro]=io,io}function Za(ro){Ir(ro).forEach(function(ao){var oo=ro[ao];if(Cr(oo))Xa(ao,ro[ao][0],ro[ao][1]);else{if("asap"!==oo)throw new Zr.InvalidArgument("Invalid event config");var io=Xa(ao,Oe,function(){for(var so=arguments.length,co=Array(so);so--;)co[so]=arguments[so];io.subscribers.forEach(function(lo){le(function(){lo.apply(null,co)})})})}})}var $a={},eo=function(ao,oo){if(oo){for(var ro=arguments.length,io=Array(ro-1);--ro;)io[ro-1]=arguments[ro];return $a[ao].subscribe.apply(null,io),Ja}return"string"==typeof ao?$a[ao]:void 0};eo.addEventType=Xa;for(var no=1,to=arguments.length;no<to;++no)Xa(arguments[no]);return eo}function yr(Ja,Xa){function $a(ai){this._cfg={version:ai,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function eo(ai,oi,ii){var si=$o._createTransaction(Zo,zo,Vo);si.create(oi),si._completion.catch(ii);var di=si._reject.bind(si);tr(function(){wa.trans=si,0===ai?(Ir(Vo).forEach(function(ci){ro(oi,ci,Vo[ci].primKey,Vo[ci].indexes)}),Re.follow(function(){return $o.on.populate.fire(si)}).catch(di)):no(ai,si,oi).catch(di)})}function no(ai,oi,ii){function si(){return di.length?Re.resolve(di.shift()(oi.idbtrans)).then(si):Re.resolve()}var di=[],ci=Lo.filter(function(hi){return hi._cfg.version===ai})[0];if(!ci)throw new Zr.Upgrade("Dexie specification of currently installed DB version is missing");Vo=$o._dbSchema=ci._cfg.dbschema;var li=!1,ui=Lo.filter(function(hi){return hi._cfg.version>ai});return ui.forEach(function(hi){di.push(function(){var pi=Vo,fi=hi._cfg.dbschema;Co(pi,ii),Co(fi,ii),Vo=$o._dbSchema=fi;var mi=to(pi,fi);if(mi.add.forEach(function(gi){ro(ii,gi[0],gi[1].primKey,gi[1].indexes)}),mi.change.forEach(function(gi){if(gi.recreate)throw new Zr.Upgrade("Not yet support for changing primary key");var yi=ii.objectStore(gi.name);gi.add.forEach(function(bi){io(yi,bi)}),gi.change.forEach(function(bi){yi.deleteIndex(bi.name),io(yi,bi)}),gi.del.forEach(function(bi){yi.deleteIndex(bi)})}),hi._cfg.contentUpgrade)return li=!0,Re.follow(function(){hi._cfg.contentUpgrade(oi)})}),di.push(function(pi){if(!li||!Wa){var fi=hi._cfg.dbschema;oo(fi,pi)}})}),si().then(function(){ao(Vo,ii)})}function to(ai,oi){var ii={del:[],add:[],change:[]};for(var si in ai)oi[si]||ii.del.push(si);for(si in oi){var di=ai[si],ci=oi[si];if(di){var li={name:si,def:ci,recreate:!1,del:[],add:[],change:[]};if(di.primKey.src!==ci.primKey.src)li.recreate=!0,ii.change.push(li);else{var ui=di.idxByName,hi=ci.idxByName;for(var pi in ui)hi[pi]||li.del.push(pi);for(pi in hi){var fi=ui[pi],mi=hi[pi];fi?fi.src!==mi.src&&li.change.push(mi):li.add.push(mi)}(0<li.del.length||0<li.add.length||0<li.change.length)&&ii.change.push(li)}}else ii.add.push([si,ci])}return ii}function ro(ai,oi,ii,si){var di=ai.db.createObjectStore(oi,ii.keyPath?{keyPath:ii.keyPath,autoIncrement:ii.auto}:{autoIncrement:ii.auto});return si.forEach(function(ci){io(di,ci)}),di}function ao(ai,oi){Ir(ai).forEach(function(ii){oi.db.objectStoreNames.contains(ii)||ro(oi,ii,ai[ii].primKey,ai[ii].indexes)})}function oo(ai,oi){for(var si,ii=0;ii<oi.db.objectStoreNames.length;++ii)si=oi.db.objectStoreNames[ii],null==ai[si]&&oi.db.deleteObjectStore(si)}function io(ai,oi){ai.createIndex(oi.name,oi.keyPath,{unique:oi.unique,multiEntry:oi.multi})}function so(ai,oi,ii){if(Jo||wa.letThrough){var si=$o._createTransaction(ai,oi,Vo);try{si.create()}catch(di){return Fa(di)}return si._promise(ai,function(di,ci){return tr(function(){return wa.trans=si,ii(di,ci,si)})}).then(function(di){return si._completion.then(function(){return di})})}if(!Go){if(!Mo)return Fa(new Zr.DatabaseClosed);$o.open().catch(Ce)}return ei.then(function(){return so(ai,oi,ii)})}function co(ai,oi,ii){var si=arguments.length;if(2>si)throw new Zr.InvalidArgument("Too few arguments");for(var di=Array(si-1);--si;)di[si-1]=arguments[si];ii=di.pop();var ci=be(di);return[ai,ci,ii]}function lo(ai,oi,ii){this.name=ai,this.schema=oi,this._tx=ii,this.hook=Wo[ai]?Wo[ai].hook:gr(null,{creating:[Be,Ce],reading:[Ke,Oe],updating:[Ne,Ce],deleting:[Fe,Ce]})}function uo(ai,oi,ii){return(ii?wr:kr)(function(si){ai.push(si),oi&&oi()})}function ho(ai,oi,ii,si,di){return new Re(function(ci,li){var ui=ii.length,hi=ui-1;if(0===ui)return ci();if(si){var pi,fi=wr(li),mi=vr(null);pe(function(){for(var bi=0;bi<ui;++bi){pi={onsuccess:null,onerror:null};var _i=ii[bi];di.call(pi,_i[0],_i[1],oi);var vi=ai.delete(_i[0]);vi._hookCtx=pi,vi.onerror=fi,vi.onsuccess=bi===hi?vr(ci):mi}},function(bi){throw pi.onerror&&pi.onerror(bi),bi})}else for(var yi,gi=0;gi<ui;++gi)yi=ai.delete(ii[gi]),yi.onerror=kr(li),gi===hi&&(yi.onsuccess=nr(function(){return ci()}))})}function po(ai,oi,ii,si){var di=this;this.db=$o,this.mode=ai,this.storeNames=oi,this.idbtrans=null,this.on=gr(this,"complete","error","abort"),this.parent=si||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Re(function(ci,li){di._resolve=ci,di._reject=li}),this._completion.then(function(){di.active=!1,di.on.complete.fire()},function(ci){var li=di.active;return di.active=!1,di.on.error.fire(ci),di.parent?di.parent._reject(ci):li&&di.idbtrans&&di.idbtrans.abort(),Fa(ci)})}function fo(ai,oi,ii){this._ctx={table:ai,index:":id"===oi?null:oi,or:ii}}function mo(ai,oi){var ii=null,si=null;if(oi)try{ii=oi()}catch(li){si=li}var di=ai._ctx,ci=di.table;this._ctx={table:ci,index:di.index,isPrimKey:!di.index||ci.schema.primKey.keyPath&&di.index===ci.schema.primKey.name,range:ii,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:si,or:di.or,valueMapper:ci.hook.reading.fire}}function go(ai,oi){return!(ai.filter||ai.algorithm||ai.or)&&(oi?ai.justLimit:!ai.replayFilter)}function yo(ai,oi){return ai._cfg.version-oi._cfg.version}function bo(ai,oi,ii){oi.forEach(function(si){var di=ii[si];ai.forEach(function(ci){si in ci||(ci===po.prototype||ci instanceof po?re(ci,si,{get:function(){return this.table(si)}}):ci[si]=new lo(si,di))})})}function _o(ai){ai.forEach(function(oi){for(var ii in oi)oi[ii]instanceof lo&&delete oi[ii]})}function vo(ai,oi,ii,si,di,ci){var li=ci?function(hi,pi,fi){return ii(ci(hi),pi,fi)}:ii,ui=nr(li,di);ai.onerror||(ai.onerror=kr(di)),ai.onsuccess=oi?he(function(){var hi=ai.result;if(hi){var pi=function(){hi.continue()};oi(hi,function(fi){pi=fi},si,di)&&ui(hi.value,hi,function(fi){pi=fi}),pi()}else si()},di):he(function(){var hi=ai.result;if(hi){var pi=function(){hi.continue()};ui(hi.value,hi,function(fi){pi=fi}),pi()}else si()},di)}function ko(ai){var oi=[];return ai.split(",").forEach(function(ii){ii=ii.trim();var si=ii.replace(/([&*]|\+\+)/g,""),di=/^\[/.test(si)?si.match(/^\[(.*)\]$/)[1].split("+"):si;oi.push(new jr(si,di||null,/\&/.test(ii),/\*/.test(ii),/\+\+/.test(ii),Cr(di),/\./.test(ii)))}),oi}function xo(ai,oi){return Ro.cmp(ai,oi)}function wo(ai,oi){return 0>xo(ai,oi)?ai:oi}function Po(ai,oi){return 0<xo(ai,oi)?ai:oi}function Ao(ai,oi){return Ro.cmp(ai,oi)}function jo(ai,oi){return Ro.cmp(oi,ai)}function Do(ai,oi){return ai<oi?-1:ai===oi?0:1}function Eo(ai,oi){return ai>oi?-1:ai===oi?0:1}function So(ai,oi){return ai?oi?function(){return ai.apply(this,arguments)&&oi.apply(this,arguments)}:ai:oi}function Io(){if($o.verno=Qo.version/10,$o._dbSchema=Vo={},zo=ie(Qo.objectStoreNames,0),0!==zo.length){var ai=Qo.transaction(Er(zo),"readonly");zo.forEach(function(oi){for(var hi,ii=ai.objectStore(oi),si=ii.keyPath,di=si&&"string"==typeof si&&-1!==si.indexOf("."),ci=new jr(si,si||"",!1,!1,!!ii.autoIncrement,si&&"string"!=typeof si,di),li=[],ui=0;ui<ii.indexNames.length;++ui){hi=ii.index(ii.indexNames[ui]),si=hi.keyPath,di=si&&"string"==typeof si&&-1!==si.indexOf(".");var pi=new jr(hi.name,si,!!hi.unique,!!hi.multiEntry,!1,si&&"string"!=typeof si,di);li.push(pi)}Vo[oi]=new Dr(oi,ci,li,{})}),bo([Wo],Ir(Vo),Vo)}}function Co(ai,oi){for(var ii=oi.db.objectStoreNames,si=0;si<ii.length;++si){var di=ii[si],ci=oi.objectStore(di);Bo="getAll"in ci;for(var li=0;li<ci.indexNames.length;++li){var ui=ci.indexNames[li],hi=ci.index(ui).keyPath,pi="string"==typeof hi?hi:"["+ie(hi).join("+")+"]";if(ai[di]){var fi=ai[di].idxByName[pi];fi&&(fi.name=ui)}}}/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Or.WorkerGlobalScope&&Or instanceof Or.WorkerGlobalScope&&604>[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]&&(Bo=!1)}function Oo(ai){$o.on("blocked").fire(ai),La.filter(function(oi){return oi.name===$o.name&&oi!==$o&&!oi._vcFired}).map(function(oi){return oi.on("versionchange").fire(ai)})}var Ko,To,Bo,Fo=yr.dependencies,No=ee({addons:yr.addons,autoOpen:!0,indexedDB:Fo.indexedDB,IDBKeyRange:Fo.IDBKeyRange},Xa),qo=No.addons,Mo=No.autoOpen,Ro=No.indexedDB,Uo=No.IDBKeyRange,Vo=this._dbSchema={},Lo=[],zo=[],Wo={},Qo=null,Ho=null,Go=!1,Yo=null,Jo=!1,Xo="readonly",Zo="readwrite",$o=this,ei=new Re(function(ai){Ko=ai}),ni=new Re(function(ai,oi){To=oi}),ti=!0,ri=!!Sr(Ro);this.version=function(ai){if(Qo||Go)throw new Zr.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,ai);var oi=Lo.filter(function(ii){return ii._cfg.version===ai})[0];return oi?oi:(oi=new $a(ai),Lo.push(oi),Lo.sort(yo),ti=!1,oi)},ee($a.prototype,{stores:function(oi){this._cfg.storesSource=this._cfg.storesSource?ee(this._cfg.storesSource,oi):oi;var ii={};Lo.forEach(function(di){ee(ii,di._cfg.storesSource)});var si=this._cfg.dbschema={};return this._parseStoresSpec(ii,si),Vo=$o._dbSchema=si,_o([Wo,$o,po.prototype]),bo([Wo,$o,po.prototype,this._cfg.tables],Ir(si),si),zo=Ir(si),this},upgrade:function(oi){var ii=this;return Ga(function(){oi($o._createTransaction(Zo,Ir(ii._cfg.dbschema),ii._cfg.dbschema))}),this._cfg.contentUpgrade=oi,this},_parseStoresSpec:function(oi,ii){Ir(oi).forEach(function(si){if(null!==oi[si]){var di={},ci=ko(oi[si]),li=ci.shift();if(li.multi)throw new Zr.Schema("Primary key cannot be multi-valued");li.keyPath&&me(di,li.keyPath,li.auto?0:li.keyPath),ci.forEach(function(ui){if(ui.auto)throw new Zr.Schema("Only primary key can be marked as autoIncrement (++)");if(!ui.keyPath)throw new Zr.Schema("Index must have a name and cannot be an empty string");me(di,ui.keyPath,ui.compound?ui.keyPath.map(function(){return""}):"")}),ii[si]=new Dr(si,li,ci,di)}})}}),this._allTables=Wo,this._createTransaction=function(ai,oi,ii,si){return new po(ai,oi,ii,si)},this._whenReady=function(ai){return Ya||Jo||wa.letThrough?ai():new Re(function(oi,ii){if(!Go){if(!Mo)return void ii(new Zr.DatabaseClosed);$o.open().catch(Ce)}ei.then(oi,ii)}).then(ai)},this.verno=0,this.open=function(){if(Go||Qo)return ei.then(function(){return Ho?Fa(Ho):$o});Lr&&(ni._stackHolder=we()),Go=!0,Ho=null,Jo=!1;var ai=Ko,oi=null;return Re.race([ni,new Re(function(ii,si){if(de(function(){return ii()}),!Ro)throw new Zr.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var di=ti?Ro.open(Ja):Ro.open(Ja,Math.round(10*$o.verno));if(!di)throw new Zr.MissingAPI("IndexedDB API not available");di.onerror=kr(si),di.onblocked=nr(Oo),di.onupgradeneeded=nr(function(ci){if(oi=di.transaction,ti&&!$o._allowEmptyDB){di.onerror=Pr,oi.abort(),di.result.close();var li=Ro.deleteDatabase(Ja);li.onsuccess=li.onerror=nr(function(){si(new Zr.NoSuchDatabase("Database "+Ja+" doesnt exist"))})}else{oi.onerror=kr(si);var ui=ci.oldVersion>Math.pow(2,62)?0:ci.oldVersion;eo(ui/10,oi,si,di)}},si),di.onsuccess=nr(function(){if(oi=null,Qo=di.result,La.push($o),ti)Io();else if(0<Qo.objectStoreNames.length)try{Co(Vo,Qo.transaction(Er(Qo.objectStoreNames),Xo))}catch(ci){}Qo.onversionchange=nr(function(ci){$o._vcFired=!0,$o.on("versionchange").fire(ci)}),ri||"__dbnames"===Ja||Ba.dbnames.put({name:Ja}).catch(Ce),ii()},si)})]).then(function(){return Yo=[],Re.resolve(yr.vip($o.on.ready.fire)).then(function ii(){if(0<Yo.length){var si=Yo.reduce(Me,Ce);return Yo=[],Re.resolve(yr.vip(si)).then(ii)}})}).finally(function(){Yo=null}).then(function(){return Go=!1,$o}).catch(function(ii){try{oi&&oi.abort()}catch(si){}return Go=!1,$o.close(),Ho=ii,Fa(Ho)}).finally(function(){Jo=!0,ai()})},this.close=function(){var ai=La.indexOf($o);if(0<=ai&&La.splice(ai,1),Qo){try{Qo.close()}catch(oi){}Qo=null}Mo=!1,Ho=new Zr.DatabaseClosed,Go&&To(Ho),ei=new Re(function(oi){Ko=oi}),ni=new Re(function(oi,ii){To=ii})},this.delete=function(){var ai=0<arguments.length;return new Re(function(oi,ii){function si(){$o.close();var di=Ro.deleteDatabase(Ja);di.onsuccess=nr(function(){ri||Ba.dbnames.delete(Ja).catch(Ce),oi()}),di.onerror=kr(ii),di.onblocked=Oo}if(ai)throw new Zr.InvalidArgument("Arguments not allowed in db.delete()");Go?ei.then(si):si()})},this.backendDB=function(){return Qo},this.isOpen=function(){return null!==Qo},this.hasBeenClosed=function(){return Ho&&Ho instanceof Zr.DatabaseClosed},this.hasFailed=function(){return null!==Ho},this.dynamicallyOpened=function(){return ti},this.name=Ja,te(this,{tables:{get:function(){return Ir(Wo).map(function(oi){return Wo[oi]})}}}),this.on=gr(this,"populate","blocked","versionchange",{ready:[Me,Ce]}),this.on.ready.subscribe=se(this.on.ready.subscribe,function(ai){return function(oi,ii){yr.vip(function(){Jo?(Ho||Re.resolve().then(oi),ii&&ai(oi)):Yo?(Yo.push(oi),ii&&ai(oi)):(ai(oi),ii||ai(function si(){$o.on.ready.unsubscribe(oi),$o.on.ready.unsubscribe(si)}))})}}),Ga(function(){$o.on("populate").fire($o._createTransaction(Zo,zo,Vo))}),this.transaction=function(){var ai=co.apply(this,arguments);return this._transaction.apply(this,ai)},this._transaction=function(ai,oi,ii){function si(){return Re.resolve().then(function(){var ui=wa.transless||wa,hi=$o._createTransaction(ai,li,Vo,di);di?hi.idbtrans=di.idbtrans:hi.create(),ii.constructor===ua&&rr();var fi,mi=Re.follow(function(){if(fi=ii.call(hi,hi))if(fi.constructor===la){var gi=ar.bind(null,null);fi.then(gi,gi)}else"function"==typeof fi.next&&"function"==typeof fi.throw&&(fi=Ar(fi))},{trans:hi,transless:ui});return(fi&&"function"==typeof fi.then?Re.resolve(fi).then(function(gi){return hi.active?gi:Fa(new Zr.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):mi.then(function(){return fi})).then(function(gi){return di&&hi._resolve(),hi._completion.then(function(){return gi})}).catch(function(gi){return hi._reject(gi),Fa(gi)})})}var di=wa.trans;di&&di.db===$o&&-1===ai.indexOf("!")||(di=null);var ci=-1!==ai.indexOf("?");ai=ai.replace("!","").replace("?","");try{var li=oi.map(function(ui){var hi=ui instanceof lo?ui.name:ui;if("string"!=typeof hi)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return hi});if("r"==ai||ai==Xo)ai=Xo;else{if("rw"!=ai&&ai!=Zo)throw new Zr.InvalidArgument("Invalid transaction mode: "+ai);ai=Zo}if(di){if(di.mode===Xo&&ai===Zo){if(!ci)throw new Zr.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");di=null}di&&li.forEach(function(ui){if(di&&-1===di.storeNames.indexOf(ui)){if(!ci)throw new Zr.SubTransaction("Table "+ui+" not included in parent transaction.");di=null}}),ci&&di&&!di.active&&(di=null)}}catch(ui){return di?di._promise(null,function(hi,pi){pi(ui)}):Fa(ui)}return di?di._promise(ai,si,"lock"):wa.trans?ur(wa.transless,function(){return $o._whenReady(si)}):$o._whenReady(si)},this.table=function(ai){if(Ya&&ti)return new lo(ai);if(!ne(Wo,ai))throw new Zr.InvalidTable("Table "+ai+" does not exist");return Wo[ai]},te(lo.prototype,{_trans:function(oi,ii,si){var di=this._tx||wa.trans;return di&&di.db===$o?di===wa.trans?di._promise(oi,ii,si):tr(function(){return di._promise(oi,ii,si)},{trans:di,transless:wa.transless||wa}):so(oi,[this.name],ii)},_idbstore:function(oi,ii,si){if(Ya)return new Re(ii);var ci=this.name;return this._trans(oi,function(li,ui,hi){if(-1===hi.storeNames.indexOf(ci))throw new Zr.NotFound("Table"+ci+" not part of transaction");return ii(li,ui,hi.idbtrans.objectStore(ci),hi)},si)},get:function(oi,ii){if(oi&&oi.constructor===Object)return this.where(oi).first(ii);var si=this;return this._idbstore(Xo,function(di,ci,li){Ya&&di(si.schema.instanceTemplate);var ui=li.get(oi);ui.onerror=kr(ci),ui.onsuccess=nr(function(){di(si.hook.reading.fire(ui.result))},ci)}).then(ii)},where:function(oi){if("string"==typeof oi)return new fo(this,oi);if(Cr(oi))return new fo(this,"["+oi.join("+")+"]");var ii=Ir(oi);if(1===ii.length)return this.where(ii[0]).equals(oi[ii[0]]);var si=this.schema.indexes.concat(this.schema.primKey).filter(function(ui){return ui.compound&&ii.every(function(hi){return 0<=ui.keyPath.indexOf(hi)})&&ui.keyPath.every(function(hi){return 0<=ii.indexOf(hi)})})[0];if(si&&Ma!==qa)return this.where(si.name).equals(si.keyPath.map(function(ui){return oi[ui]}));si||console.warn("The query "+JSON.stringify(oi)+" on "+this.name+" would benefit of a "+("compound index ["+ii.join("+")+"]"));var di=this.schema.idxByName,ci=ii.reduce(function(ui,hi){return[ui[0]||di[hi],ui[0]||!di[hi]?So(ui[1],function(pi){return""+fe(pi,hi)==""+oi[hi]}):ui[1]]},[null,null]),li=ci[0];return li?this.where(li.name).equals(oi[li.keyPath]).filter(ci[1]):si?this.filter(ci[1]):this.where(ii).equals("")},count:function(oi){return this.toCollection().count(oi)},offset:function(oi){return this.toCollection().offset(oi)},limit:function(oi){return this.toCollection().limit(oi)},reverse:function(){return this.toCollection().reverse()},filter:function(oi){return this.toCollection().and(oi)},each:function(oi){return this.toCollection().each(oi)},toArray:function(oi){return this.toCollection().toArray(oi)},orderBy:function(oi){return new mo(new fo(this,Cr(oi)?"["+oi.join("+")+"]":oi))},toCollection:function(){return new mo(new fo(this))},mapToClass:function(oi,ii){this.schema.mappedClass=oi;var si=Object.create(oi.prototype);ii&&_r(si,ii),this.schema.instanceTemplate=si;var di=function(li){if(!li)return li;var ui=Object.create(oi.prototype);for(var ci in li)if(ne(li,ci))try{ui[ci]=li[ci]}catch(hi){}return ui};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=di,this.hook("reading",di),oi},defineClass:function(oi){return this.mapToClass(yr.defineClass(oi),oi)},bulkDelete:function(oi){return this.hook.deleting.fire===Ce?this._idbstore(Zo,function(ii,si,di,ci){ii(ho(di,ci,oi,!1,Ce))}):this.where(":id").anyOf(oi).delete().then(function(){})},bulkPut:function(oi,ii){var si=this;return this._idbstore(Zo,function(di,ci,li){if(!li.keyPath&&!si.schema.primKey.auto&&!ii)throw new Zr.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(li.keyPath&&ii)throw new Zr.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(ii&&ii.length!==oi.length)throw new Zr.InvalidArgument("Arguments objects and keys must have the same length");if(0===oi.length)return di();var ui,hi,pi=function(wi){0===fi.length?di(wi):ci(new Se(si.name+".bulkPut(): "+fi.length+" of "+mi+" operations failed",fi))},fi=[],mi=oi.length,gi=si;if(si.hook.creating.fire===Ce&&si.hook.updating.fire===Ce){hi=uo(fi);for(var yi=0,bi=oi.length;yi<bi;++yi)ui=ii?li.put(oi[yi],ii[yi]):li.put(oi[yi]),ui.onerror=hi;ui.onerror=uo(fi,pi),ui.onsuccess=xr(pi)}else{var _i=ii||li.keyPath&&oi.map(function(xi){return fe(xi,li.keyPath)}),vi=_i&&ue(_i,function(xi,wi){return null!=xi&&[xi,oi[wi]]}),ki=_i?gi.where(":id").anyOf(_i.filter(function(xi){return null!=xi})).modify(function(){this.value=vi[this.primKey],vi[this.primKey]=null}).catch(Ee,function(xi){fi=xi.failures}).then(function(){for(var Ai,xi=[],wi=ii&&[],Pi=_i.length-1;0<=Pi;--Pi)Ai=_i[Pi],(null==Ai||vi[Ai])&&(xi.push(oi[Pi]),ii&&wi.push(Ai),null!=Ai&&(vi[Ai]=null));return xi.reverse(),ii&&wi.reverse(),gi.bulkAdd(xi,wi)}).then(function(xi){var wi=_i[_i.length-1];return null==wi?xi:wi}):gi.bulkAdd(oi);ki.then(pi).catch(Se,function(xi){fi=fi.concat(xi.failures),pi()}).catch(ci)}},"locked")},bulkAdd:function(oi,ii){var si=this,di=this.hook.creating.fire;return this._idbstore(Zo,function(ci,li,ui,hi){function pi(wi){0===yi.length?ci(wi):li(new Se(si.name+".bulkAdd(): "+yi.length+" of "+bi+" operations failed",yi))}if(!ui.keyPath&&!si.schema.primKey.auto&&!ii)throw new Zr.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(ui.keyPath&&ii)throw new Zr.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(ii&&ii.length!==oi.length)throw new Zr.InvalidArgument("Arguments objects and keys must have the same length");if(0===oi.length)return ci();var fi,mi,gi,yi=[],bi=oi.length;if(di!==Ce){var _i,vi=ui.keyPath;mi=uo(yi,null,!0),gi=vr(null),pe(function(){for(var wi=0,Pi=oi.length;wi<Pi;++wi){_i={onerror:null,onsuccess:null};var Ai=ii&&ii[wi],ji=oi[wi],Di=ii?Ai:vi?fe(ji,vi):void 0,Ei=di.call(_i,Di,ji,hi);null==Di&&null!=Ei&&(vi?(ji=_e(ji),me(ji,vi,Ei)):Ai=Ei),fi=null==Ai?ui.add(ji):ui.add(ji,Ai),fi._hookCtx=_i,wi<Pi-1&&(fi.onerror=mi,_i.onsuccess&&(fi.onsuccess=gi))}},function(wi){throw _i.onerror&&_i.onerror(wi),wi}),fi.onerror=uo(yi,pi,!0),fi.onsuccess=vr(pi)}else{mi=uo(yi);for(var ki=0,xi=oi.length;ki<xi;++ki)fi=ii?ui.add(oi[ki],ii[ki]):ui.add(oi[ki]),fi.onerror=mi;fi.onerror=uo(yi,pi),fi.onsuccess=xr(pi)}})},add:function(oi,ii){var si=this.hook.creating.fire;return this._idbstore(Zo,function(di,ci,li,ui){var hi={onsuccess:null,onerror:null};if(si!==Ce){var pi=null==ii?li.keyPath?fe(oi,li.keyPath):void 0:ii,fi=si.call(hi,pi,oi,ui);null==pi&&null!=fi&&(li.keyPath?me(oi,li.keyPath,fi):ii=fi)}try{var mi=null==ii?li.add(oi):li.add(oi,ii);mi._hookCtx=hi,mi.onerror=wr(ci),mi.onsuccess=vr(function(gi){var yi=li.keyPath;yi&&me(oi,yi,gi),di(gi)})}catch(gi){throw hi.onerror&&hi.onerror(gi),gi}})},put:function(oi,ii){var si=this,di=this.hook.creating.fire,ci=this.hook.updating.fire;if(di!==Ce||ci!==Ce){var li=this.schema.primKey.keyPath,ui=void 0===ii?li&&fe(oi,li):ii;return null==ui?this.add(oi):(oi=_e(oi),this._trans(Zo,function(){return si.where(":id").equals(ui).modify(function(){this.value=oi}).then(function(hi){return 0===hi?si.add(oi,ii):ui})},"locked"))}return this._idbstore(Zo,function(hi,pi,fi){var mi=void 0===ii?fi.put(oi):fi.put(oi,ii);mi.onerror=kr(pi),mi.onsuccess=nr(function(gi){var yi=fi.keyPath;yi&&me(oi,yi,gi.target.result),hi(mi.result)})})},delete:function(oi){return this.hook.deleting.subscribers.length?this.where(":id").equals(oi).delete():this._idbstore(Zo,function(ii,si,di){var ci=di.delete(oi);ci.onerror=kr(si),ci.onsuccess=nr(function(){ii(ci.result)})})},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore(Zo,function(oi,ii,si){var di=si.clear();di.onerror=kr(ii),di.onsuccess=nr(function(){oi(di.result)})})},update:function(oi,ii){if("object"!=("undefined"===typeof ii?"undefined":babelHelpers.typeof(ii))||Cr(ii))throw new Zr.InvalidArgument("Modifications must be an object.");if("object"!=("undefined"===typeof oi?"undefined":babelHelpers.typeof(oi))||Cr(oi))return this.where(":id").equals(oi).modify(ii);Ir(ii).forEach(function(di){me(oi,di,ii[di])});var si=fe(oi,this.schema.primKey.keyPath);return void 0===si?Fa(new Zr.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(si).modify(ii)}}),te(po.prototype,{_lock:function(){return ce(!wa.global),++this._reculock,1!==this._reculock||wa.global||(wa.lockOwnerFor=this),this},_unlock:function(){if(ce(!wa.global),0===--this._reculock)for(wa.global||(wa.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var oi=this._blockedFuncs.shift();try{ur(oi[1],oi[0])}catch(ii){}}return this},_locked:function(){return this._reculock&&wa.lockOwnerFor!==this},create:function(oi){var ii=this;if(!this.mode)return this;if(ce(!this.idbtrans),!oi&&!Qo)switch(Ho&&Ho.name){case"DatabaseClosedError":throw new Zr.DatabaseClosed(Ho);case"MissingAPIError":throw new Zr.MissingAPI(Ho.message,Ho);default:throw new Zr.OpenFailed(Ho);}if(!this.active)throw new Zr.TransactionInactive;return ce(null===this._completion._state),oi=this.idbtrans=oi||Qo.transaction(Er(this.storeNames),this.mode),oi.onerror=nr(function(si){Pr(si),ii._reject(oi.error)}),oi.onabort=nr(function(si){Pr(si),ii.active&&ii._reject(new Zr.Abort(oi.error)),ii.active=!1,ii.on("abort").fire(si)}),oi.oncomplete=nr(function(){ii.active=!1,ii._resolve()}),this},_promise:function(oi,ii,si){var di=this;if(oi===Zo&&this.mode!==Zo)return Fa(new Zr.ReadOnly("Transaction is readonly"));if(!this.active)return Fa(new Zr.TransactionInactive);if(this._locked())return new Re(function(li,ui){di._blockedFuncs.push([function(){di._promise(oi,ii,si).then(li,ui)},wa])});if(si)return tr(function(){var li=new Re(function(ui,hi){di._lock();var pi=ii(ui,hi,di);pi&&pi.then&&pi.then(ui,hi)});return li.finally(function(){return di._unlock()}),li._lib=!0,li});var ci=new Re(function(li,ui){var hi=ii(li,ui,di);hi&&hi.then&&hi.then(li,ui)});return ci._lib=!0,ci},_root:function(){return this.parent?this.parent._root():this},waitFor:function(oi){var ii=this._root();if(oi=Re.resolve(oi),ii._waitingFor)ii._waitingFor=ii._waitingFor.then(function(){return oi});else{ii._waitingFor=oi,ii._waitingQueue=[];var si=ii.idbtrans.objectStore(ii.storeNames[0]);!function ci(){for(++ii._spinCount;ii._waitingQueue.length;)ii._waitingQueue.shift()();ii._waitingFor&&(si.get(-(1/0)).onsuccess=ci)}()}var di=ii._waitingFor;return new Re(function(ci,li){oi.then(function(ui){return ii._waitingQueue.push(nr(ci.bind(null,ui)))},function(ui){return ii._waitingQueue.push(nr(li.bind(null,ui)))}).finally(function(){ii._waitingFor===di&&(ii._waitingFor=null)})})},abort:function(){this.active&&this._reject(new Zr.Abort),this.active=!1},tables:{get:Ae("Transaction.tables",function(){return Wo})},table:function(oi){var ii=$o.table(oi);return new lo(oi,ii.schema,this)}}),te(fo.prototype,function(){function ai(li,ui,hi){var pi=li instanceof fo?new mo(li):li;return pi._ctx.error=hi?new hi(ui):new TypeError(ui),pi}function oi(li){return new mo(li,function(){return Uo.only("")}).limit(0)}function ii(li){return"next"===li?function(ui){return ui.toUpperCase()}:function(ui){return ui.toLowerCase()}}function si(li){return"next"===li?function(ui){return ui.toLowerCase()}:function(ui){return ui.toUpperCase()}}function di(li,ui,hi,pi,fi,mi){for(var _i,gi=Math.min(li.length,pi.length),yi=-1,bi=0;bi<gi;++bi){if(_i=ui[bi],_i!==pi[bi])return 0>fi(li[bi],hi[bi])?li.substr(0,bi)+hi[bi]+hi.substr(bi+1):0>fi(li[bi],pi[bi])?li.substr(0,bi)+pi[bi]+hi.substr(bi+1):0<=yi?li.substr(0,yi)+ui[yi]+hi.substr(yi+1):null;0>fi(li[bi],_i)&&(yi=bi)}return gi<pi.length&&"next"===mi?li+hi.substr(li.length):gi<li.length&&"prev"===mi?li.substr(0,hi.length):0>yi?null:li.substr(0,yi)+pi[yi]+hi.substr(yi+1)}function ci(li,ui,hi,pi){function fi(Ai){mi=ii(Ai),gi=si(Ai),yi="next"===Ai?Do:Eo;var ji=hi.map(function(Di){return{lower:gi(Di),upper:mi(Di)}}).sort(function(Di,Ei){return yi(Di.lower,Ei.lower)});bi=ji.map(function(Di){return Di.upper}),_i=ji.map(function(Di){return Di.lower}),vi=Ai,ki="next"===Ai?"":pi}var mi,gi,yi,bi,_i,vi,ki,xi=hi.length;if(!hi.every(function(Ai){return"string"==typeof Ai}))return ai(li,Va);fi("next");var wi=new mo(li,function(){return Uo.bound(bi[0],_i[xi-1]+pi)});wi._ondirectionchange=function(Ai){fi(Ai)};var Pi=0;return wi._addAlgorithm(function(Ai,ji,Di){var Ei=Ai.key;if("string"!=typeof Ei)return!1;var Si=gi(Ei);if(ui(Si,_i,Pi))return!0;for(var Oi,Ii=null,Ci=Pi;Ci<xi;++Ci)Oi=di(Ei,Si,bi[Ci],_i[Ci],yi,vi),null===Oi&&null===Ii?Pi=Ci+1:(null===Ii||0<yi(Ii,Oi))&&(Ii=Oi);return ji(null===Ii?Di:function(){Ai.continue(Ii+ki)}),!1}),wi}return{between:function(ui,hi,pi,fi){pi=!1!==pi,fi=!0===fi;try{return 0<xo(ui,hi)||0===xo(ui,hi)&&(pi||fi)&&(!pi||!fi)?oi(this):new mo(this,function(){return Uo.bound(ui,hi,!pi,!fi)})}catch(mi){return ai(this,Ua)}},equals:function(ui){return new mo(this,function(){return Uo.only(ui)})},above:function(ui){return new mo(this,function(){return Uo.lowerBound(ui,!0)})},aboveOrEqual:function(ui){return new mo(this,function(){return Uo.lowerBound(ui)})},below:function(ui){return new mo(this,function(){return Uo.upperBound(ui,!0)})},belowOrEqual:function(ui){return new mo(this,function(){return Uo.upperBound(ui)})},startsWith:function(ui){return"string"==typeof ui?this.between(ui,ui+qa,!0,!0):ai(this,Va)},startsWithIgnoreCase:function(ui){return""===ui?this.startsWith(ui):ci(this,function(hi,pi){return 0===hi.indexOf(pi[0])},[ui],qa)},equalsIgnoreCase:function(ui){return ci(this,function(hi,pi){return hi===pi[0]},[ui],"")},anyOfIgnoreCase:function(){var ui=ke.apply(Vr,arguments);return 0===ui.length?oi(this):ci(this,function(hi,pi){return-1!==pi.indexOf(hi)},ui,"")},startsWithAnyOfIgnoreCase:function(){var ui=ke.apply(Vr,arguments);return 0===ui.length?oi(this):ci(this,function(hi,pi){return pi.some(function(fi){return 0===hi.indexOf(fi)})},ui,qa)},anyOf:function(){var ui=ke.apply(Vr,arguments),hi=Ao;try{ui.sort(hi)}catch(mi){return ai(this,Ua)}if(0===ui.length)return oi(this);var pi=new mo(this,function(){return Uo.bound(ui[0],ui[ui.length-1])});pi._ondirectionchange=function(mi){hi="next"===mi?Ao:jo,ui.sort(hi)};var fi=0;return pi._addAlgorithm(function(mi,gi,yi){for(var bi=mi.key;0<hi(bi,ui[fi]);)if(++fi,fi===ui.length)return gi(yi),!1;return 0===hi(bi,ui[fi])||(gi(function(){mi.continue(ui[fi])}),!1)}),pi},notEqual:function(ui){return this.inAnyRange([[Ra,ui],[ui,Ma]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var ui=ke.apply(Vr,arguments);if(0===ui.length)return new mo(this);try{ui.sort(Ao)}catch(pi){return ai(this,Ua)}var hi=ui.reduce(function(pi,fi){return pi?pi.concat([[pi[pi.length-1][1],fi]]):[[Ra,fi]]},null);return hi.push([ui[ui.length-1],Ma]),this.inAnyRange(hi,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(ui,hi){function pi(Ai,ji){for(var Si,Di=0,Ei=Ai.length;Di<Ei;++Di)if(Si=Ai[Di],0>xo(ji[0],Si[1])&&0<xo(ji[1],Si[0])){Si[0]=wo(Si[0],ji[0]),Si[1]=Po(Si[1],ji[1]);break}return Di===Ei&&Ai.push(ji),Ai}function fi(Ai,ji){return _i(Ai[0],ji[0])}function mi(Ai){return!ki(Ai)&&!xi(Ai)}if(0===ui.length)return oi(this);if(!ui.every(function(Ai){return void 0!==Ai[0]&&void 0!==Ai[1]&&0>=Ao(Ai[0],Ai[1])}))return ai(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Zr.InvalidArgument);var gi,yi=!hi||!1!==hi.includeLowers,bi=hi&&!0===hi.includeUppers,_i=Ao;try{gi=ui.reduce(pi,[]),gi.sort(fi)}catch(Ai){return ai(this,Ua)}var vi=0,ki=bi?function(Ai){return 0<Ao(Ai,gi[vi][1])}:function(Ai){return 0<=Ao(Ai,gi[vi][1])},xi=yi?function(Ai){return 0<jo(Ai,gi[vi][0])}:function(Ai){return 0<=jo(Ai,gi[vi][0])},wi=ki,Pi=new mo(this,function(){return Uo.bound(gi[0][0],gi[gi.length-1][1],!yi,!bi)});return Pi._ondirectionchange=function(Ai){"next"===Ai?(wi=ki,_i=Ao):(wi=xi,_i=jo),gi.sort(fi)},Pi._addAlgorithm(function(Ai,ji,Di){for(var Ei=Ai.key;wi(Ei);)if(++vi,vi===gi.length)return ji(Di),!1;return!!mi(Ei)||0!==xo(Ei,gi[vi][1])&&0!==xo(Ei,gi[vi][0])&&(ji(function(){_i===Ao?Ai.continue(gi[vi][0]):Ai.continue(gi[vi][1])}),!1)}),Pi},startsWithAnyOf:function(){var ui=ke.apply(Vr,arguments);return ui.every(function(hi){return"string"==typeof hi})?0===ui.length?oi(this):this.inAnyRange(ui.map(function(hi){return[hi,hi+qa]})):ai(this,"startsWithAnyOf() only works with strings")}}}),te(mo.prototype,function(){function ai(ui,hi){ui.filter=So(ui.filter,hi)}function oi(ui,hi,pi){var fi=ui.replayFilter;ui.replayFilter=fi?function(){return So(fi(),hi())}:hi,ui.justLimit=pi&&!fi}function ii(ui,hi){ui.isMatch=So(ui.isMatch,hi)}function si(ui,hi){if(ui.isPrimKey)return hi;var pi=ui.table.schema.idxByName[ui.index];if(!pi)throw new Zr.Schema("KeyPath "+ui.index+" on object store "+hi.name+" is not indexed");return hi.index(pi.name)}function di(ui,hi){var pi=si(ui,hi);return ui.keysOnly&&"openKeyCursor"in pi?pi.openKeyCursor(ui.range||null,ui.dir+ui.unique):pi.openCursor(ui.range||null,ui.dir+ui.unique)}function ci(ui,hi,pi,fi,mi){var gi=ui.replayFilter?So(ui.filter,ui.replayFilter()):ui.filter;ui.or?function(){function yi(){2===++vi&&pi()}function bi(ki,xi,wi){if(!gi||gi(xi,wi,yi,fi)){var Pi=xi.primaryKey,Ai=""+Pi;"[object ArrayBuffer]"===Ai&&(Ai=""+new Uint8Array(Pi)),ne(_i,Ai)||(_i[Ai]=!0,hi(ki,xi,wi))}}var _i={},vi=0;ui.or._iterate(bi,yi,fi,mi),vo(di(ui,mi),ui.algorithm,bi,yi,fi,!ui.keysOnly&&ui.valueMapper)}():vo(di(ui,mi),So(ui.algorithm,gi),hi,pi,fi,!ui.keysOnly&&ui.valueMapper)}function li(ui){return ui.table.schema.instanceTemplate}return{_read:function(hi,pi){var fi=this._ctx;return fi.error?fi.table._trans(null,Fa.bind(null,fi.error)):fi.table._idbstore(Xo,hi).then(pi)},_write:function(hi){var pi=this._ctx;return pi.error?pi.table._trans(null,Fa.bind(null,pi.error)):pi.table._idbstore(Zo,hi,"locked")},_addAlgorithm:function(hi){var pi=this._ctx;pi.algorithm=So(pi.algorithm,hi)},_iterate:function(hi,pi,fi,mi){return ci(this._ctx,hi,pi,fi,mi)},clone:function(hi){var pi=Object.create(this.constructor.prototype),fi=Object.create(this._ctx);return hi&&ee(fi,hi),pi._ctx=fi,pi},raw:function(){return this._ctx.valueMapper=null,this},each:function(hi){var pi=this._ctx;if(Ya){var fi=li(pi),mi=pi.table.schema.primKey.keyPath,gi=fe(fi,pi.index?pi.table.schema.idxByName[pi.index].keyPath:mi),yi=fe(fi,mi);hi(fi,{key:gi,primaryKey:yi})}return this._read(function(bi,_i,vi){ci(pi,hi,bi,_i,vi)})},count:function(hi){if(Ya)return Re.resolve(0).then(hi);var pi=this._ctx;if(go(pi,!0))return this._read(function(mi,gi,yi){var bi=si(pi,yi),_i=pi.range?bi.count(pi.range):bi.count();_i.onerror=kr(gi),_i.onsuccess=function(vi){mi(Math.min(vi.target.result,pi.limit))}},hi);var fi=0;return this._read(function(mi,gi,yi){ci(pi,function(){return++fi,!1},function(){mi(fi)},gi,yi)},hi)},sortBy:function(hi,pi){function fi(vi,ki){return ki?fi(vi[gi[ki]],ki-1):vi[yi]}function mi(vi,ki){var xi=fi(vi,bi),wi=fi(ki,bi);return xi<wi?-_i:xi>wi?_i:0}var gi=hi.split(".").reverse(),yi=gi[0],bi=gi.length-1,_i="next"===this._ctx.dir?1:-1;return this.toArray(function(vi){return vi.sort(mi)}).then(pi)},toArray:function(hi){var pi=this._ctx;return this._read(function(fi,mi,gi){if(Ya&&fi([li(pi)]),Bo&&"next"===pi.dir&&go(pi,!0)&&0<pi.limit){var yi=pi.table.hook.reading.fire,bi=si(pi,gi),_i=pi.limit<1/0?bi.getAll(pi.range,pi.limit):bi.getAll(pi.range);_i.onerror=kr(mi),_i.onsuccess=xr(yi===Oe?fi:function(ki){try{fi(ki.map(yi))}catch(xi){mi(xi)}})}else{var vi=[];ci(pi,function(ki){vi.push(ki)},function(){fi(vi)},mi,gi)}},hi)},offset:function(hi){var pi=this._ctx;return 0>=hi?this:(pi.offset+=hi,go(pi)?oi(pi,function(){var fi=hi;return function(mi,gi){return 0===fi||(1===fi?(--fi,!1):(gi(function(){mi.advance(fi),fi=0}),!1))}}):oi(pi,function(){var fi=hi;return function(){return 0>--fi}}),this)},limit:function(hi){return this._ctx.limit=Math.min(this._ctx.limit,hi),oi(this._ctx,function(){var pi=hi;return function(fi,mi,gi){return 0>=--pi&&mi(gi),0<=pi}},!0),this},until:function(hi,pi){var fi=this._ctx;return Ya&&hi(li(fi)),ai(this._ctx,function(mi,gi,yi){return!hi(mi.value)||(gi(yi),pi)}),this},first:function(hi){return this.limit(1).toArray(function(pi){return pi[0]}).then(hi)},last:function(hi){return this.reverse().first(hi)},filter:function(hi){return Ya&&hi(li(this._ctx)),ai(this._ctx,function(pi){return hi(pi.value)}),ii(this._ctx,hi),this},and:function(hi){return this.filter(hi)},or:function(hi){return new fo(this._ctx.table,hi,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(hi){var pi=this._ctx;return pi.keysOnly=!pi.isMatch,this.each(function(fi,mi){hi(mi.key,mi)})},eachUniqueKey:function(hi){return this._ctx.unique="unique",this.eachKey(hi)},eachPrimaryKey:function(hi){var pi=this._ctx;return pi.keysOnly=!pi.isMatch,this.each(function(fi,mi){hi(mi.primaryKey,mi)})},keys:function(hi){var pi=this._ctx;pi.keysOnly=!pi.isMatch;var fi=[];return this.each(function(mi,gi){fi.push(gi.key)}).then(function(){return fi}).then(hi)},primaryKeys:function(hi){var pi=this._ctx;if(Bo&&"next"===pi.dir&&go(pi,!0)&&0<pi.limit)return this._read(function(mi,gi,yi){var bi=si(pi,yi),_i=pi.limit<1/0?bi.getAllKeys(pi.range,pi.limit):bi.getAllKeys(pi.range);_i.onerror=kr(gi),_i.onsuccess=xr(mi)}).then(hi);pi.keysOnly=!pi.isMatch;var fi=[];return this.each(function(mi,gi){fi.push(gi.primaryKey)}).then(function(){return fi}).then(hi)},uniqueKeys:function(hi){return this._ctx.unique="unique",this.keys(hi)},firstKey:function(hi){return this.limit(1).keys(function(pi){return pi[0]}).then(hi)},lastKey:function(hi){return this.reverse().firstKey(hi)},distinct:function(){var hi=this._ctx,pi=hi.index&&hi.table.schema.idxByName[hi.index];if(!pi||!pi.multi)return this;var fi={};return ai(this._ctx,function(mi){var gi=mi.primaryKey.toString(),yi=ne(fi,gi);return fi[gi]=!0,!yi}),this},modify:function(hi){var pi=this,fi=this._ctx,mi=fi.table.hook,gi=mi.updating.fire,yi=mi.deleting.fire;return Ya&&"function"==typeof hi&&hi.call({value:fi.table.schema.instanceTemplate},fi.table.schema.instanceTemplate),this._write(function(bi,_i,vi,ki){function wi(Bi){return Bi&&(Oi.push(Bi),Ki.push(Ti)),_i(new Ee("Error modifying one or more objects",Oi,Ii,Ki))}function Pi(){Ci&&Ii+Oi.length===Si&&(0<Oi.length?wi():bi(Ii))}var Ai;if("function"==typeof hi)Ai=gi===Ce&&yi===Ce?hi:function(Bi){var Fi=_e(Bi);if(!1===hi.call(this,Bi,this))return!1;if(ne(this,"value")){var Ni=ve(Fi,this.value),qi=gi.call(this,Ni,this.primKey,Fi,ki);qi&&(Bi=this.value,Ir(qi).forEach(function(Mi){me(Bi,Mi,qi[Mi])}))}else yi.call(this,this.primKey,Bi,ki)};else if(gi===Ce){var ji=Ir(hi),Di=ji.length;Ai=function(Fi){for(var Ni=!1,qi=0;qi<Di;++qi){var Mi=ji[qi],Ri=hi[Mi];fe(Fi,Mi)!==Ri&&(me(Fi,Mi,Ri),Ni=!0)}return Ni}}else{var Ei=hi;hi=ye(Ei),Ai=function(Fi){var Ni=!1,qi=gi.call(this,hi,this.primKey,_e(Fi),ki);return qi&&ee(hi,qi),Ir(hi).forEach(function(Mi){var Ri=hi[Mi];fe(Fi,Mi)!==Ri&&(me(Fi,Mi,Ri),Ni=!0)}),qi&&(hi=ye(Ei)),Ni}}var Si=0,Ii=0,Ci=!1,Oi=[],Ki=[],Ti=null;pi.clone().raw()._iterate(function(Bi,Fi){function Ni(Ri){return Oi.push(Ri),Ki.push(qi.primKey),Pi(),!0}Ti=Fi.primaryKey;var qi={primKey:Fi.primaryKey,value:Bi,onsuccess:null,onerror:null};if(!1!==Ai.call(qi,Bi,qi)){var Mi=!ne(qi,"value");++Si,pe(function(){var Ri=Mi?Fi.delete():Fi.update(qi.value);Ri._hookCtx=qi,Ri.onerror=wr(Ni),Ri.onsuccess=vr(function(){++Ii,Pi()})},Ni)}else qi.onsuccess&&qi.onsuccess(qi.value)},function(){Ci=!0,Pi()},wi,vi)})},delete:function(){var hi=this,pi=this._ctx,fi=pi.range,mi=pi.table.hook.deleting.fire,gi=mi!==Ce;if(!gi&&go(pi)&&(pi.isPrimKey&&!Qa||!fi))return this._write(function(bi,_i,vi){var ki=kr(_i),xi=fi?vi.count(fi):vi.count();xi.onerror=ki,xi.onsuccess=function(){var wi=xi.result;pe(function(){var Pi=fi?vi.delete(fi):vi.clear();Pi.onerror=ki,Pi.onsuccess=function(){return bi(wi)}},function(Pi){return _i(Pi)})}});var yi=gi?2e3:1e4;return this._write(function(bi,_i,vi,ki){var xi=0,wi=hi.clone({keysOnly:!pi.isMatch&&!gi}).distinct().limit(yi).raw(),Pi=[];bi(function ji(){return wi.each(gi?function(Di,Ei){Pi.push([Ei.primaryKey,Ei.value])}:function(Di,Ei){Pi.push(Ei.primaryKey)}).then(function(){return gi?Pi.sort(function(Di,Ei){return Ao(Di[0],Ei[0])}):Pi.sort(Ao),ho(vi,ki,Pi,gi,mi)}).then(function(){var Di=Pi.length;return xi+=Di,Pi=[],Di<yi?xi:ji()})}())})}}}),ee(this,{Collection:mo,Table:lo,Transaction:po,Version:$a,WhereClause:fo}),function(){$o.on("versionchange",function(ai){0<ai.newVersion?console.warn("Another connection wants to upgrade database '"+$o.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+$o.name+"'. Closing db now to resume the delete request."),$o.close()}),$o.on("blocked",function(ai){!ai.newVersion||ai.newVersion<ai.oldVersion?console.warn("Dexie.delete('"+$o.name+"') was blocked"):console.warn("Upgrade '"+$o.name+"' blocked by other connection holding version "+ai.oldVersion/10)})}(),qo.forEach(function(ai){ai($o)})}function br(Ja){if("function"==typeof Ja)return new Ja;if(Cr(Ja))return[br(Ja[0])];if(Ja&&"object"==("undefined"===typeof Ja?"undefined":babelHelpers.typeof(Ja))){var Xa={};return _r(Xa,Ja),Xa}return Ja}function _r(Ja,Xa){return Ir(Xa).forEach(function(Za){var $a=br(Xa[Za]);Ja[Za]=$a}),Ja}function vr(Ja){return nr(function(Xa){var Za=Xa.target,$a=Za.result,eo=Za._hookCtx,no=eo&&eo.onsuccess;no&&no($a),Ja&&Ja($a)},Ja)}function kr(Ja){return nr(function(Xa){return Pr(Xa),Ja(Xa.target.error),!1})}function xr(Ja){return nr(function(Xa){Ja(Xa.target.result)})}function wr(Ja){return nr(function(Xa){var Za=Xa.target,$a=Za.error,eo=Za._hookCtx,no=eo&&eo.onerror;return no&&no($a),Pr(Xa),Ja($a),!1})}function Pr(Ja){Ja.stopPropagation&&Ja.stopPropagation(),Ja.preventDefault&&Ja.preventDefault()}function Ar(Ja){function Xa(to){return function(ro){var ao=to(ro),oo=ao.value;return ao.done?oo:oo&&"function"==typeof oo.then?oo.then(eo,no):Cr(oo)?Re.all(oo).then(eo,no):eo(oo)}}var Za=function(ro){return Ja.next(ro)},eo=Xa(Za),no=Xa(function(ro){return Ja.throw(ro)});return Xa(Za)()}function jr(Ja,Xa,Za,$a,eo,no,to){this.name=Ja,this.keyPath=Xa,this.unique=Za,this.multi=$a,this.auto=eo,this.compound=no,this.dotted=to;var ro="string"==typeof Xa?Xa:Xa&&"["+[].join.call(Xa,"+")+"]";this.src=(Za?"&":"")+($a?"*":"")+(eo?"++":"")+ro}function Dr(Ja,Xa,Za,$a){this.name=Ja,this.primKey=Xa||new jr,this.indexes=Za||[new jr],this.instanceTemplate=$a,this.mappedClass=null,this.idxByName=ue(Za,function(eo){return[eo.name,eo]})}function Er(Ja){return 1===Ja.length?Ja[0]:Ja}function Sr(Ja){var Xa=Ja&&(Ja.getDatabaseNames||Ja.webkitGetDatabaseNames);return Xa&&Xa.bind(Ja)}var Ir=Object.keys,Cr=Array.isArray,Or="undefined"==typeof self?"undefined"==typeof window?global:window:self,Kr=Object.getPrototypeOf,Tr={}.hasOwnProperty,Br=Object.defineProperty,Fr=Object.getOwnPropertyDescriptor,Nr=[].slice,qr=[].concat,Mr="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(be([8,16,32,64].map(function(Ja){return["Int","Uint","Float"].map(function(Xa){return Xa+Ja+"Array"})}))).filter(function(Ja){return Or[Ja]}).map(function(Ja){return Or[Ja]}),Rr="undefined"!=typeof Symbol&&Symbol.iterator,Ur=Rr?function(Ja){var Xa;return null!=Ja&&(Xa=Ja[Rr])&&Xa.apply(Ja)}:function(){return null},Vr={},Lr="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href),zr=function(){return!0},Wr=!new Error("").stack,Hr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Gr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Hr),Yr={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};ae(je).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Pe(this._e,2))}},toString:function(){return this.name+": "+this.message}}),ae(Ee).from(je),ae(Se).from(je);var Jr=Gr.reduce(function(Ja,Xa){return Ja[Xa]=Xa+"Error",Ja},{}),Zr=Gr.reduce(function(Ja,Xa){function Za(eo,no){this._e=we(),this.name=$a,eo?"string"==typeof eo?(this.message=eo,this.inner=no||null):"object"==("undefined"===typeof eo?"undefined":babelHelpers.typeof(eo))&&(this.message=eo.name+" "+eo.message,this.inner=eo):(this.message=Yr[Xa]||$a,this.inner=null)}var $a=Xa+"Error";return ae(Za).from(je),Ja[Xa]=Za,Ja},{});Zr.Syntax=SyntaxError,Zr.Type=TypeError,Zr.Range=RangeError;var $r=Hr.reduce(function(Ja,Xa){return Ja[Xa+"Error"]=Zr[Xa],Ja},{}),ea=Gr.reduce(function(Ja,Xa){return-1===["Syntax","Type","Range"].indexOf(Xa)&&(Ja[Xa+"Error"]=Zr[Xa]),Ja},{});ea.ModifyError=Ee,ea.DexieError=je,ea.BulkError=Se;var na={},ta=100,aa=7,oa=function(){try{return new Function("let F=async ()=>{},p=F();return [p,Object.getPrototypeOf(p),Promise.resolve(),F.constructor];")()}catch(Xa){var Ja=Or.Promise;return Ja?[Ja.resolve(),Ja.prototype,Ja.resolve()]:[]}}(),ia=oa[0],sa=oa[1],da=oa[2],ca=sa&&sa.then,la=ia&&ia.constructor,ua=oa[3],ha=!!da,pa=!1,fa=da?function(){da.then(Ye)}:Or.setImmediate?setImmediate.bind(null,Ye):Or.MutationObserver?function(){var Ja=document.createElement("div");new MutationObserver(function(){Ye(),Ja=null}).observe(Ja,{attributes:!0}),Ja.setAttribute("i","1")}:function(){setTimeout(Ye,0)},ma=function(Xa,Za){Pa.push([Xa,Za]),ya&&(fa(),ya=!1)},ga=!0,ya=!0,ba=[],_a=[],va=null,ka=Oe,xa={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:mr,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(Xa){try{mr(Xa[0],Xa[1])}catch(Za){}})}},wa=xa,Pa=[],Aa=0,ja=[],Da={get:function(){function Xa(eo,no){var to=this,ro=!Za.global&&(Za!==wa||$a!==Oa);ro&&ar();var ao=new Re(function(oo,io){We(to,new Ue(pr(eo,Za,ro),pr(no,Za,ro),oo,io,Za))});return Lr&&Ge(ao,this),ao}var Za=wa,$a=Oa;return Xa.prototype=na,Xa},set:function(Xa){re(this,"then",Xa&&Xa.prototype===na?Da:{get:function(){return Xa},set:Da.set})}};te(Re.prototype,{then:Da,_then:function(Xa,Za){We(this,new Ue(null,null,Xa,Za,wa))},catch:function(Xa){if(1===arguments.length)return this.then(null,Xa);var Za=arguments[0],$a=arguments[1];return"function"==typeof Za?this.then(null,function(eo){return eo instanceof Za?$a(eo):er(eo)}):this.then(null,function(eo){return eo&&eo.name===Za?$a(eo):er(eo)})},finally:function(Xa){return this.then(function(Za){return Xa(),Za},function(Za){return Xa(),er(Za)})},stack:{get:function(){if(this._stack)return this._stack;try{pa=!0;var Xa=He(this,[],20),Za=Xa.join("\nFrom previous: ");return null!==this._state&&(this._stack=Za),Za}finally{pa=!1}}},timeout:function(Xa,Za){var $a=this;return Xa<1/0?new Re(function(eo,no){var to=setTimeout(function(){return no(new Zr.Timeout(Za))},Xa);$a.then(eo,no).finally(clearTimeout.bind(null,to))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&re(Re.prototype,Symbol.toStringTag,"Promise"),xa.env=lr(),te(Re,{all:function(){var Xa=ke.apply(null,arguments).map(ir);return new Re(function(Za,$a){0===Xa.length&&Za([]);var eo=Xa.length;Xa.forEach(function(no,to){return Re.resolve(no).then(function(ro){Xa[to]=ro,--eo||Za(Xa)},$a)})})},resolve:function(Xa){if(Xa instanceof Re)return Xa;if(Xa&&"function"==typeof Xa.then)return new Re(function($a,eo){Xa.then($a,eo)});var Za=new Re(na,!0,Xa);return Ge(Za,va),Za},reject:er,race:function(){var Xa=ke.apply(null,arguments).map(ir);return new Re(function(Za,$a){Xa.map(function(eo){return Re.resolve(eo).then(Za,$a)})})},PSD:{get:function(){return wa},set:function(Xa){return wa=Xa}},newPSD:tr,usePSD:ur,scheduler:{get:function(){return ma},set:function(Xa){ma=Xa}},rejectionMapper:{get:function(){return ka},set:function(Xa){ka=Xa}},follow:function(Xa,Za){return new Re(function($a,eo){return tr(function(no,to){var ro=wa;ro.unhandleds=[],ro.onunhandled=to,ro.finalize=Te(function(){var ao=this;$e(function(){0===ao.unhandleds.length?no():to(ao.unhandleds[0])})},ro.finalize),Xa()},Za,$a,eo)})}});var Ea={awaits:0,echoes:0,id:0},Sa=0,Ia=[],Ca=0,Oa=0,Ka=0,Ta="unhandledrejection";de(function(){ma=function(Xa,Za){setTimeout(function(){Xa.apply(null,Za)},0)}});var Ba,Fa=Re.reject,Na="2.0.1",qa=String.fromCharCode(65535),Ma=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(Ja){return qa}}(),Ra=-(1/0),Ua="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Va="String expected.",La=[],za="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Wa=za,Qa=za,Ha=function(Xa){return!/(dexie\.js|dexie\.min\.js)/.test(Xa)};xe(Lr,Ha);var Ga=function(){},Ya=!1;return te(yr,ea),te(yr,{delete:function(Xa){var Za=new yr(Xa),$a=Za.delete();return $a.onblocked=function(eo){return Za.on("blocked",eo),this},$a},exists:function(Xa){return new yr(Xa).open().then(function(Za){return Za.close(),!0}).catch(yr.NoSuchDatabaseError,function(){return!1})},getDatabaseNames:function(Xa){var Za=Sr(yr.dependencies.indexedDB);return Za?new Re(function($a,eo){var no=Za();no.onsuccess=function(to){$a(ie(to.target.result,0))},no.onerror=kr(eo)}).then(Xa):Ba.dbnames.toCollection().primaryKeys(Xa)},defineClass:function(Xa){return function($a){$a?ee(this,$a):Ya&&_r(this,Xa)}},applyStructure:_r,ignoreTransaction:function(Xa){return wa.trans?ur(wa.transless,Xa):Xa()},vip:function(Xa){return tr(function(){return wa.letThrough=!0,Xa()})},async:function(Xa){return function(){try{var Za=Ar(Xa.apply(this,arguments));return Za&&"function"==typeof Za.then?Za:Re.resolve(Za)}catch($a){return Fa($a)}}},spawn:function(Xa,Za,$a){try{var eo=Ar(Xa.apply($a,Za||[]));return eo&&"function"==typeof eo.then?eo:Re.resolve(eo)}catch(no){return Fa(no)}},currentTransaction:{get:function(){return wa.trans||null}},waitFor:function(Xa,Za){var $a=Re.resolve("function"==typeof Xa?yr.ignoreTransaction(Xa):Xa).timeout(Za||6e4);return wa.trans?wa.trans.waitFor($a):$a},Promise:Re,debug:{get:function(){return Lr},set:function(Xa){xe(Xa,"dexie"===Xa?function(){return!0}:Ha)}},derive:ae,extend:ee,props:te,override:se,Events:gr,getByKeyPath:fe,setByKeyPath:me,delByKeyPath:function(Ja,Xa){"string"==typeof Xa?me(Ja,Xa,void 0):"length"in Xa&&[].map.call(Xa,function(Za){me(Ja,Za,void 0)})},shallowClone:ye,deepClone:_e,getObjectDiff:ve,asap:le,maxKey:Ma,minKey:Ra,addons:[],connections:La,MultiModifyError:Zr.Modify,errnames:Jr,IndexSpec:jr,TableSchema:Dr,dependencies:{indexedDB:Or.indexedDB||Or.mozIndexedDB||Or.webkitIndexedDB||Or.msIndexedDB,IDBKeyRange:Or.IDBKeyRange||Or.webkitIDBKeyRange},semVer:Na,version:Na.split(".").map(function(Ja){return parseInt(Ja)}).reduce(function(Ja,Xa,Za){return Ja+Xa/Math.pow(10,2*Za)}),fakeAutoComplete:Ga,default:yr,Dexie:yr}),Re.rejectionMapper=function(Ja,Xa){if(!Ja||Ja instanceof je||Ja instanceof TypeError||Ja instanceof SyntaxError||!Ja.name||!$r[Ja.name])return Ja;var Za=new $r[Ja.name](Xa||Ja.message,Ja);return"stack"in Ja&&re(Za,"stack",{get:function(){return this.inner.stack}}),Za},de(function(){yr.fakeAutoComplete=Ga=de,yr.fake=Ya=!0}),Ba=new yr("__dbnames"),Ba.version(1).stores({dbnames:"name"}),function(){var Ja="Dexie.DatabaseNames";if(void 0!==("undefined"===typeof localStorage?"undefined":babelHelpers.typeof(localStorage))&&void 0!==Or.document)try{JSON.parse(localStorage.getItem(Ja)||"[]").forEach(function(Xa){return Ba.dbnames.put({name:Xa}).catch(Ce)}),localStorage.removeItem(Ja)}catch(Xa){}}(),yr});